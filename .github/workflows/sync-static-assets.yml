name: Sync Static Assets to GitHub Pages
'on':
  push:
    branches:
    - main
    paths:
    - static/**
    - templates/**
  workflow_dispatch: null
permissions:
  contents: write
  actions: read
jobs:
  sync-static-assets:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout main branch
      uses: actions/checkout@v4
      with:
        ref: main
        fetch-depth: 0
    - name: Configure Git
      run: 'git config --global user.name "GitHub Actions"

        git config --global user.email "actions@github.com"'
    - name: Checkout gh-pages branch
      run: git checkout gh-pages
    - name: Create static directory if not exists
      run: mkdir -p static
    - name: Sync static assets from main
      run: 'git checkout main -- static/

        echo "âœ… Static assets synced from main branch"'
    - name: Check for changes
      id: check-changes
      run: "if git diff --quiet; then\n  echo \"changes=false\" >> $GITHUB_OUTPUT\n\
        \  echo \"No changes to commit\"\nelse\n  echo \"changes=true\" >> $GITHUB_OUTPUT\n\
        \  echo \"Changes detected in static assets\"\nfi"
    - name: Commit and push changes
      if: steps.check-changes.outputs.changes == 'true'
      run: 'git add static/

        git commit -m "ðŸ”„ Auto-sync: Update static assets from main branch


        - Synced CSS, JS, and other static files

        - Triggered by changes in main branch

        - Auto-generated by GitHub Actions"

        git push origin gh-pages'
    - name: Summary
      run: "echo \"### Static Assets Sync Summary \U0001F4CA\" >> $GITHUB_STEP_SUMMARY\n\
        echo \"\" >> $GITHUB_STEP_SUMMARY\nif [ \"${{ steps.check-changes.outputs.changes\
        \ }}\" = \"true\" ]; then\n  echo \"âœ… Static assets were updated and synced\
        \ to gh-pages branch\" >> $GITHUB_STEP_SUMMARY\n  echo \"\U0001F517 [View\
        \ GitHub Pages](https://sleepycat233.github.io/Project_Bach/)\" >> $GITHUB_STEP_SUMMARY\n\
        else\n  echo \"â„¹ï¸ No changes detected in static assets\" >> $GITHUB_STEP_SUMMARY\n\
        fi\necho \"\" >> $GITHUB_STEP_SUMMARY\necho \"**Synced directories:**\" >>\
        \ $GITHUB_STEP_SUMMARY\necho \"- `static/css/` - CSS stylesheets\" >> $GITHUB_STEP_SUMMARY\n\
        echo \"- `static/js/` - JavaScript files\" >> $GITHUB_STEP_SUMMARY\necho \"\
        - `static/assets/` - Images and other assets\" >> $GITHUB_STEP_SUMMARY"
