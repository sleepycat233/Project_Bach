api:
  openrouter:
    key: "${OPENROUTER_API_KEY}"  # 从环境变量读取
    base_url: "https://openrouter.ai/api/v1"
    models:
      summary: "google/gemma-3n-e2b-it:free"  # Google免费快速模型
      mindmap: "google/gemma-3n-e2b-it:free"  # Google免费快速模型
      # 备选免费快速模型：
      # "opengvlab/internvl3-2b:free"      # 最快 (379.88 t/s)
      # "google/gemini-2.5-flash-preview"  # 快速 (140.85 t/s)
      # "qwen/qwen3-30b-a3b:free"          # 中等 (83.19 t/s)
    rate_limits:
      free_tier:
        requests_per_10s: 10      # 每10秒最多10个请求
        requests_per_minute: 60   # 每分钟最多60个请求
        daily_credit_limit: 5     # 免费层每日5个credits
      paid_tier:
        requests_per_10s: 10      # 付费账户10秒限制相同
        requests_per_minute: 60   # 每分钟限制相同
        credit_to_requests_ratio: 100  # 每个credit允许100个请求/天

paths:
  watch_folder: "./watch_folder"  # 音频文件监控目录
  data_folder: "./data"  # 数据存储目录 (转录文本、日志等)
  output_folder: "./data/output"  # 处理结果输出目录

spacy:
  model: "zh_core_web_sm"

whisperkit:
  model: "large-v3"    # 可选: tiny, small, base, medium, large-v3
  model_prefix: "distil"  # 推荐配置：distil (英文4.4倍速) 或 openai (支持中文)
  language: "en"  
  # 性能对比（10分钟英文音频）：
  # - distil-large-v3: 32.9秒 (18x实时，仅英文)  ⚡ 推荐英文内容
  # - openai-large-v3: 143.9秒 (4.2x实时，支持中文) 🎯 推荐中文/混合内容
  model_path: "/Users/me/Documents/huggingface/models/argmaxinc/whisperkit-coreml"

# 系统配置
system:
  debug: false  # 调试模式开关
  
logging:
  level: "INFO"  # 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "./data/logs/app.log"
  console: true  # 是否在控制台输出日志

# Phase 4: 网络集成配置
network:
  tailscale:
    auth_key: "${TAILSCALE_AUTH_KEY}"  # 从环境变量读取
    machine_name: "project-bach"  # 机器名称
    network_name: "project-bach-network"  # 网络名称
    auto_connect: true  # 自动连接
    timeout: 30  # 连接超时时间（秒）

  file_transfer:
    remote_base_path: "/Users/remote/project_bach/watch_folder"  # 远程监控文件夹路径
    local_base_path: "./watch_folder"  # 本地监控文件夹路径
    chunk_size: 8192  # 文件传输块大小（字节）
    timeout: 60  # 传输超时时间（秒）
    retry_attempts: 3  # 重试次数
    verify_integrity: true  # 是否验证文件完整性
    max_file_size: 104857600  # 最大文件大小限制（100MB）

  security:
    allowed_networks: ["100.64.0.0/10"]  # Tailscale CGNAT范围
    blocked_ips: []  # 阻止的IP地址列表
    require_encryption: true  # 是否要求加密连接
    max_connection_attempts: 3  # 最大连接尝试次数
    connection_timeout: 10  # 连接超时时间（秒）
    max_connections_per_minute: 60  # 每分钟最大连接数
    connection_window_seconds: 60  # 连接频率统计窗口（秒）

  monitoring:
    check_interval: 30  # 网络状态检查间隔（秒）
    timeout: 5  # ping超时时间（秒）
    max_retries: 3  # 最大重试次数
    target_hosts: []  # 监控目标主机列表，启动时自动发现Tailscale节点
    alert_on_disconnect: true  # 连接断开时是否告警

  # 安全文件服务器配置
  secure_file_server:
    enabled: true  # 是否启用安全文件服务器
    host: "0.0.0.0"  # 监听地址，0.0.0.0表示所有接口
    port: 8080  # 服务端口
    allowed_dirs:  # 只允许访问这些目录
      - "./watch_folder"
      - "./output"
    auth_token: "${SECURE_FILE_SERVER_TOKEN}"  # 从环境变量读取
    enable_upload: true  # 是否允许文件上传
    enable_download: true  # 是否允许文件下载

# Phase 5: GitHub Pages 自动发布配置
github:
  # GitHub仓库信息
  username: "${GITHUB_USERNAME}"  # 你的GitHub用户名（从环境变量读取）
  repo_name: "Project_Bach"  # 仓库名
  pages_branch: "gh-pages"  # GitHub Pages部署分支
  
  # Git配置 (使用SSH认证，无需token)
  remote_url: "git@github.com:${GITHUB_USERNAME}/Project_Bach.git"  # SSH远程地址
  
  # Git用户配置 (如果系统没有全局配置时使用的默认值)
  default_user_name: "Project Bach Bot"  # 默认用户名
  default_user_email: "bot@project-bach.com"  # 默认邮箱
  
  # 网站配置
  website:
    title: "Project Bach - 智能音频处理系统"
    description: "基于 WhisperKit + OpenRouter + spaCy 的智能音频处理与内容生成系统"
    theme: "dark"  # 默认主题: light, dark, auto
    
  # 部署设置
  publishing:
    auto_deploy: true  # 是否自动部署到GitHub Pages
    include_source: false  # 网站分支是否包含源代码 (推荐: false)
    clean_deploy: true  # 每次部署前清理网站分支 (推荐: true)
    max_files_per_deploy: 50  # 每次部署最多包含的音频结果文件数
    
  # 内容过滤
  content_filter:
    exclude_patterns:  # 不发布包含这些模式的文件
      - "*private*"
      - "*confidential*" 
      - "*test*"
    min_content_length: 100  # 最小内容长度 (字符)
    anonymize_names: true  # 是否在发布前进行人名匿名化

# 模板配置
templates:
  base_dir: "./templates"  # 模板文件目录
  
  # 页面模板
  homepage: "index.html.j2"  # 主页模板
  content: "content.html.j2"  # 内容页面模板
  error: "error.html.j2"  # 错误页面模板
  
  # 样式配置
  css:
    primary_color: "#0066cc"  # 主色调
    dark_primary_color: "#4fc3f7"  # 深色模式主色调
    font_family: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
    
  # 功能开关
  features:
    theme_toggle: true  # 主题切换按钮
    search: false  # 搜索功能 (未来功能)
    rss_feed: false  # RSS订阅 (未来功能)
    comments: false  # 评论系统 (未来功能)