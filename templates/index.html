{% extends "base.html" %}

{% block content %}
<div class="index">
    <div class="card">
        <h2>ğŸµ éŸ³é¢‘å¤„ç†ç»“æœ</h2>
        <p>æ™ºèƒ½éŸ³é¢‘å¤„ç†ä¸å†…å®¹åˆ†æå¹³å°</p>
        
        <div style="margin-top: 20px;">
            <span style="background-color: var(--success-color); color: white; padding: 4px 12px; border-radius: 16px; font-size: 0.9em;">
                ğŸ“Š å…±æ”¶å½• {{ results | length }} ä¸ªå¤„ç†ç»“æœ
            </span>
        </div>
    </div>
    
    {% if results and results | length > 0 %}
    <div class="results-section">
        <h2 style="margin-top: 30px;">ğŸ“‹ æœ€æ–°ç»“æœ</h2>
        
        {% for result in results[:10] %}
        <article class="card result-item" style="margin-top: 20px;">
            <h3>
                <a href="{{ result.file }}" style="color: var(--primary-color); text-decoration: none;">
                    {{ result.title }}
                </a>
            </h3>
            <div class="meta" style="color: var(--text-secondary); font-size: 0.9em; margin-top: 8px;">
                <span>ğŸ“… {{ result.date | format_date }}</span>
                {% if result.file_size %}
                <span style="margin-left: 15px;">ğŸ“¦ {{ result.file_size | file_size }}</span>
                {% endif %}
            </div>
            <p style="margin-top: 12px; color: var(--text-secondary);">
                {{ result.summary | truncate_words(30) }}
            </p>
            <div style="margin-top: 15px;">
                <a href="{{ result.file }}" class="btn btn-primary" style="font-size: 0.9em; padding: 6px 16px;">
                    æŸ¥çœ‹è¯¦æƒ… â†’
                </a>
            </div>
        </article>
        {% endfor %}
        
        {% if results | length > 10 %}
        <div style="text-align: center; margin-top: 30px;">
            <a href="archive.html" class="btn btn-primary">æŸ¥çœ‹å…¨éƒ¨ {{ results | length }} ä¸ªç»“æœ â†’</a>
        </div>
        {% endif %}
    </div>
    
    <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
    <div class="stats-overview card" style="margin-top: 30px;">
        <h2>ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ</h2>
        <table class="table table-striped" style="margin-top: 15px;">
            <tbody>
                <tr>
                    <td>æ€»å¤„ç†æ•°</td>
                    <td><strong>{{ results | length }}</strong></td>
                </tr>
                <tr>
                    <td>æœ¬æœˆæ–°å¢</td>
                    <td><strong>{{ stats.this_month if stats else 0 }}</strong></td>
                </tr>
                <tr>
                    <td>æœ¬å‘¨æ–°å¢</td>
                    <td><strong>{{ stats.this_week if stats else 0 }}</strong></td>
                </tr>
                <tr>
                    <td>æœ€åæ›´æ–°</td>
                    <td>{{ current_time | format_date('%Y-%m-%d %H:%M:%S') }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    {% else %}
    <div class="card empty-state" style="text-align: center; margin-top: 30px;">
        <h3>ğŸµ æš‚æ— å¤„ç†ç»“æœ</h3>
        <p style="color: var(--text-secondary); margin-top: 15px;">
            è¿˜æ²¡æœ‰éŸ³é¢‘æ–‡ä»¶è¢«å¤„ç†ã€‚è¯·å°†éŸ³é¢‘æ–‡ä»¶æ”¾å…¥ç›‘æ§æ–‡ä»¶å¤¹å¼€å§‹å¤„ç†ã€‚
        </p>
    </div>
    {% endif %}
    
    <!-- å¿«é€Ÿå¯¼èˆª -->
    <div class="quick-nav card" style="margin-top: 30px;">
        <h2>ğŸ” å¿«é€Ÿå¯¼èˆª</h2>
        <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <a href="archive.html" style="text-decoration: none;">
                <div style="padding: 20px; background-color: var(--card-bg); border-radius: 8px; text-align: center; transition: transform 0.2s;">
                    <div style="font-size: 2em;">ğŸ“‹</div>
                    <div style="margin-top: 10px; font-weight: 500; color: var(--text-color);">å®Œæ•´å½’æ¡£</div>
                    <div style="color: var(--text-secondary); font-size: 0.9em;">æŸ¥çœ‹æ‰€æœ‰ç»“æœ</div>
                </div>
            </a>
            <a href="stats.html" style="text-decoration: none;">
                <div style="padding: 20px; background-color: var(--card-bg); border-radius: 8px; text-align: center;">
                    <div style="font-size: 2em;">ğŸ“ˆ</div>
                    <div style="margin-top: 10px; font-weight: 500; color: var(--text-color);">æ•°æ®ç»Ÿè®¡</div>
                    <div style="color: var(--text-secondary); font-size: 0.9em;">å¤„ç†ç»“æœåˆ†æ</div>
                </div>
            </a>
            <a href="search.html" style="text-decoration: none;">
                <div style="padding: 20px; background-color: var(--card-bg); border-radius: 8px; text-align: center;">
                    <div style="font-size: 2em;">ğŸ”</div>
                    <div style="margin-top: 10px; font-weight: 500; color: var(--text-color);">æœç´¢åŠŸèƒ½</div>
                    <div style="color: var(--text-secondary); font-size: 0.9em;">å¿«é€ŸæŸ¥æ‰¾å†…å®¹</div>
                </div>
            </a>
            <a href="about.html" style="text-decoration: none;">
                <div style="padding: 20px; background-color: var(--card-bg); border-radius: 8px; text-align: center;">
                    <div style="font-size: 2em;">â„¹ï¸</div>
                    <div style="margin-top: 10px; font-weight: 500; color: var(--text-color);">å…³äºé¡¹ç›®</div>
                    <div style="color: var(--text-secondary); font-size: 0.9em;">Project Bach</div>
                </div>
            </a>
        </div>
    </div>
</div>
{% endblock %}