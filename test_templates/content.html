{% extends "base.html" %}

{% block content %}
<article class="card">
    <header>
        <h1>{{ content.title }}</h1>
        <div class="meta" style="margin-top: 15px; color: var(--text-secondary);">
            <span>ğŸ“… {{ content.processed_time | format_date }}</span>
            <span style="margin-left: 20px;">ğŸµ {{ content.original_file }}</span>
            {% if content.file_size %}
            <span style="margin-left: 20px;">ğŸ“¦ {{ content.file_size | file_size }}</span>
            {% endif %}
            {% if content.audio_duration %}
            <span style="margin-left: 20px;">â±ï¸ {{ content.audio_duration }}</span>
            {% endif %}
        </div>
    </header>
    
    <div style="margin-top: 30px;">
        <section class="summary">
            <h2>ğŸ“„ å†…å®¹æ‘˜è¦</h2>
            <div style="margin-top: 15px; padding: 20px; background-color: var(--card-bg); border-radius: 8px;">
                {{ content.summary | markdown | safe }}
            </div>
        </section>
        
        <section class="mindmap" style="margin-top: 30px;">
            <h2>ğŸ§  æ€ç»´å¯¼å›¾</h2>
            <div style="margin-top: 15px; padding: 20px; background-color: var(--card-bg); border-radius: 8px;">
                {{ content.mindmap | markdown | safe }}
            </div>
        </section>
        
        {% if content.anonymized_names and content.anonymized_names | length > 0 %}
        <section class="anonymization" style="margin-top: 30px;">
            <h2>ğŸ”’ äººååŒ¿ååŒ–</h2>
            <div style="margin-top: 15px;">
                <p>æœ¬æ¬¡å¤„ç†ä¸­å…±åŒ¿ååŒ–äº† <strong>{{ content.anonymized_names | length }}</strong> ä¸ªäººåï¼š</p>
                
                <table class="table table-striped" style="margin-top: 15px;">
                    <thead>
                        <tr>
                            <th>åºå·</th>
                            <th>åŒ¿ååŒ–å</th>
                            <th>ç±»å‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for original, anonymous in content.anonymized_names.items() %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ anonymous }}</td>
                            <td>ä¸­æ–‡/è‹±æ–‡</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
                <p style="margin-top: 15px; font-style: italic; color: var(--text-secondary);">
                    ğŸ’¡ ä¸ºä¿æŠ¤éšç§ï¼Œæ‰€æœ‰äººåå·²è¢«æ›¿æ¢ä¸ºè™šæ‹Ÿå§“å
                </p>
            </div>
        </section>
        {% endif %}
        
        {% if content.statistics %}
        <section class="statistics" style="margin-top: 30px;">
            <h2>ğŸ“Š å¤„ç†ç»Ÿè®¡</h2>
            <table class="table table-striped" style="margin-top: 15px;">
                <tbody>
                    <tr>
                        <td>æ‘˜è¦é•¿åº¦</td>
                        <td>{{ content.summary | length }} å­—ç¬¦</td>
                    </tr>
                    <tr>
                        <td>æ€ç»´å¯¼å›¾é•¿åº¦</td>
                        <td>{{ content.mindmap | length }} å­—ç¬¦</td>
                    </tr>
                    <tr>
                        <td>åŒ¿ååŒ–äººåæ•°</td>
                        <td>{{ content.anonymized_names | length }} ä¸ª</td>
                    </tr>
                    {% if content.processing_duration %}
                    <tr>
                        <td>å¤„ç†æ—¶é•¿</td>
                        <td>{{ content.processing_duration }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </section>
        {% endif %}
    </div>
</article>

<!-- è¿”å›æŒ‰é’® -->
<div style="margin-top: 30px; text-align: center;">
    <a href="index.html" class="btn btn-primary">ğŸ”™ è¿”å›é¦–é¡µ</a>
</div>
{% endblock %}